# Check for Dropbox dev tools. If not use home directory
TOOLS=$HOME/Dropbox/Dev/Tools
if ! ls $TOOLS 2>/dev/null 1>/dev/null; then TOOLS=$HOME; fi

# Path to oh-my-zsh configuration.
ZSH=$TOOLS/dotfiles/zsh/oh-my-zsh

# Set name of the theme to load.
export ZSH_THEME="mortalscumbagmod"

# Comment this out to disable weekly auto-update checks
DISABLE_AUTO_UPDATE="true"

# Load plugins
plugins=(brew docker gem git knife node npm osx ruby rvm vagrant web-search wd)

# Run oh-my-zsh
source $ZSH/oh-my-zsh.sh

# PATH
export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH"

# Java
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home

# Haskell
export PATH="$HOME/Library/Haskell/bin:$PATH"

# Go-lang
GOPATH=$HOME/Dropbox/Dev/Projects/go
if ! ls $GOPATH 2>/dev/null 1>/dev/null; then GOPATH=$HOME/go; fi

# NVM
export NVM_DIR=~/.nvm
source $(brew --prefix nvm)/nvm.sh

# RVM
export PATH="$PATH:$HOME/.rvm/bin"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"

# alias commands
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias c='clear'
alias la='ls -a'
alias ll='ls -al'
alias ga.='git add . -A'
alias gru='git remote update --prune'
alias glog="git log --color --graph\
    --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%C(bold blue)<%an>%Creset'\
    --abbrev-commit"
alias pgstart='postgres -D /usr/local/var/postgres'
alias sshcfg='vi ~/.ssh/config'
alias sshls='cat ~/.ssh/config'
alias untar='for a in `ls -1 *.tar.gz`; do tar -zxvf $a; done'
alias updates='\
    brew update &&\
    brew upgrade &&\
    brew cleanup &&\
    rvm get stable &&\
    gem update --no-rdoc --no-ri &&\
    npm -g update &&\
    apm upgrade'

# functions
vimrc() { command vi $TOOLS/dotfiles/vim/vimrc }
zshrc() { command vi $TOOLS/dotfiles/zsh/zshrc }

# ZSH Setup
#
# Autocomplete
autoload -Uz compinit && compinit

# Vim mode zsh
bindkey -v
bindkey -M viins 'jj' vi-cmd-mode

function zle-line-init zle-keymap-select {
    RPS1="${${KEYMAP/vicmd/-- NORMAL --}/(main|viins)/-- INSERT --}"
    RPS2=$RPS1
    zle reset-prompt
}
zle -N zle-line-init
zle -N zle-keymap-select

